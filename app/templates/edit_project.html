{% extends "base.html" %}

{% block title %}Edit {{ project.name }} - Compound Management System{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="page-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h1 class="page-title">
                <span class="text-gradient">Edit Project</span>
            </h1>
            <p class="page-subtitle">Update information for {{ project.name }}</p>
        </div>
        <a href="{{ url_for('main.projects') }}" class="btn btn-outline-secondary">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 6L8 12.5 4.5 6h7z"/>
            </svg>
            Back to Projects
        </a>
    </div>
</div>

<!-- Main Form -->
<div class="card floating-card">
    <div class="card-body">
        <form method="POST">
            <div class="row g-4">
                <div class="col-12">
                    <div class="mb-4">
                        <h5 class="text-muted mb-3 d-flex align-items-center">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                                <path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"/>
                                <path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"/>
                            </svg>
                            Project Information
                        </h5>
                    </div>
                    
                    <div class="mb-4">
                        <label for="name" class="form-label">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                <path d="M8 5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z"/>
                            </svg>
                            Project Name <span class="text-danger">*</span>
                        </label>
                        <input type="text" class="form-control" id="name" name="name" value="{{ project.name }}" required
                               placeholder="Enter project name">
                    </div>
                    
                    <div class="mb-4">
                        <label for="description" class="form-label">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                                <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/>
                                <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
                            </svg>
                            Description
                        </label>
                        <textarea class="form-control" id="description" name="description" rows="4" 
                                  placeholder="Describe the purpose and goals of this project">{{ project.description or '' }}</textarea>
                        <div class="form-text">
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16" class="me-1">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                            </svg>
                            Optional: Provide context about research objectives, timeline, or collaborators
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Submit Button Area -->
            <div class="d-flex gap-3 pt-4 border-top">
                <button type="submit" class="btn btn-primary">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                        <path d="M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"/>
                        <path d="M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"/>
                    </svg>
                    Update Project
                </button>
                <a href="{{ url_for('main.projects') }}" class="btn btn-outline-secondary">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                    </svg>
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>

<style>
/* Enhanced styling for edit project page */
.form-control:focus {
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 0.2rem rgba(var(--accent-blue-rgb), 0.25);
}

.form-label {
    font-weight: 500;
    color: var(--gray-700);
    margin-bottom: var(--spacing-xs);
}

/* Floating button effects */
.btn {
    position: relative;
    overflow: hidden;
}

.btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.3s, height 0.3s;
}

.btn:hover::before {
    width: 300px;
    height: 300px;
}
</style>

<script>
// Enhanced form validation
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    const nameInput = document.getElementById('name');
    
    // Real-time validation for project name
    nameInput.addEventListener('input', function() {
        const value = this.value.trim();
        
        if (value.length === 0) {
            this.classList.remove('border-success', 'border-warning');
            this.classList.add('border-danger');
        } else if (value.length < 3) {
            this.classList.remove('border-success', 'border-danger');
            this.classList.add('border-warning');
        } else {
            this.classList.remove('border-warning', 'border-danger');
            this.classList.add('border-success');
        }
    });
    
    // Form submission validation
    form.addEventListener('submit', function(e) {
        const name = nameInput.value.trim();
        
        if (name.length === 0) {
            e.preventDefault();
            nameInput.focus();
            nameInput.classList.add('border-danger');
            alert('Project name is required.');
            return false;
        }
        
        if (name.length < 3) {
            e.preventDefault();
            nameInput.focus();
            nameInput.classList.add('border-warning');
            alert('Project name should be at least 3 characters long.');
            return false;
        }
    });
});
</script>
{% endblock %}